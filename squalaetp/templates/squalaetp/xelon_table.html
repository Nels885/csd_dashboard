{% extends 'format/datatables_format.html' %}

{% load static i18n %}

{% block card_header %}

    <div class="card-header">
        <ul class="nav nav-tabs card-header-tabs" role="tablist">

            {% include 'squalaetp/tab_select.html' with select=query_param %}

        </ul>
    </div>

{% endblock %}

{% block table_content %}

    {% if media %}
        <table class="table table-secondary table-sm">
            <thead>
            <tr>
                {% if media.type %}
                    <th colspan="2" class="text-primary">Info {{ media.get_type_display }} :</th>
                {% else %}
                    <th colspan="2" class="text-primary">Info Nav/Radio :</th>
                {% endif %}
            </tr>
            </thead>
            <tbody class="table-borderless">
                <tr>
                    <td class="text-dark td-ihm-40">Réf. matériel comp.</td>
                    <td id="xelon">{{ media.comp_ref }}</td>
                </tr>
                <tr>
                    <td class="text-dark td-ihm-40">Modèle produit</td>
                    <td>{{ media.get_name_display|default:'???' }}</td>
                </tr>
                <tr>
                    <td class="text-dark td-ihm-40">Modèle produit (XELON)</td>
                    <td>{{ media.xelon_name|default:'???' }}</td>
                </tr>
                <tr>
                    <td class="text-dark td-ihm-40">Fabriquant</td>
                    <td>{{ media.supplier_oe }}</td>
                </tr>
            </tbody>
        </table>
        <hr>
    {% elif prod %}
        <table class="table table-secondary table-sm">
            <thead>
            <tr>
                {% if prod.type %}
                    <th colspan="2" class="text-primary">Info {{ prod.get_type_display }} :</th>
                {% else %}
                    <th colspan="2" class="text-primary">Info produit :</th>
                {% endif %}
            </tr>
            </thead>
            <tbody class="table-borderless">
                <tr>
                    <td class="text-dark td-ihm-40">Réf. matériel comp.</td>
                    <td id="xelon">{{ prod.comp_ref }}</td>
                </tr>
                <tr>
                    <td class="text-dark td-ihm-40">Modèle produit</td>
                    <td>{{ prod.get_name_display|default:'???' }}</td>
                </tr>
                <tr>
                    <td class="text-dark td-ihm-40">Modèle produit (XELON)</td>
                    <td>{{ prod.xelon_name|default:'???' }}</td>
                </tr>
                <tr>
                    <td class="text-dark td-ihm-40">Fabriquant</td>
                    <td>{{ prod.supplier_oe }}</td>
                </tr>
            </tbody>
        </table>
        <hr>
    {% endif %}

    <table class="table table-bordered table-sm text-nowrap display" id="xelonTable" style="width: 100%;">
        <thead>
        <tr>
            <th></th>
            <th class="all">Numéro de dossier</th>
            <th>V.I.N.</th>
            <th class="all">Modèle produit</th>
            <th class="all">Activité</th>
            <th>Modèle véhicule</th>
            <th>Date Retour</th>
            <th class="all">Type de clôture</th>
            <th>Date exp. attendue</th>
            <th>Nom Technicien</th>
        </tr>
        </thead>
    </table>

{% endblock %}

{% block tablejs %}

    <!-- Page level custom scripts -->
    <script type="text/javascript">
        const URL_AJAX = "{% url 'squalaetp:api_xelon-list' %}?filter={{ query_param }}";
    </script>
    <script type="text/javascript" src="{% static 'squalaetp/js/xelon-tables.js' %}"></script>

{% endblock %}
